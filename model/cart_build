#!/usr/bin/env python

import common.cart
from common.configuration import Configuration
from common.tree import save_tree

if __name__ == "__main__":
    import argparse
    parser = argparse.ArgumentParser(description="Builds a cart tree model")
    parser.add_argument('configuration')
    parser.add_argument('labelled_file')
    parser.add_argument('output_file')
    args = parser.parse_args()

    conf = Configuration(args.configuration)
    T = common.cart.build_tree(conf, conf["modules.model.params.cp"], args.labelled_file)
    save_tree(T, args.output_file)
